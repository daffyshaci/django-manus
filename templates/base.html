<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OpenManus Chat</title>
  <style>
    :root { --bg:#0f172a; --bg-soft:#111827; --card:#0b1220; --text:#e5e7eb; --muted:#9ca3af; --accent:#22d3ee; --accent-2:#60a5fa; --danger:#ef4444; --success:#10b981; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background: linear-gradient(180deg, var(--bg), #030712); color: var(--text); }
    a { color: var(--accent-2); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .container { max-width: 1000px; margin: 0 auto; padding: 24px; }
    header { position: sticky; top: 0; z-index: 10; backdrop-filter: blur(8px); background: rgba(3,7,18,0.6); border-bottom: 1px solid #1f2937; }
    header .inner { display:flex; align-items:center; gap:16px; padding: 12px 24px; }
    .brand { display:flex; align-items:center; gap:10px; font-weight:700; color: var(--text); }
    .brand-logo { width:28px; height:28px; background: radial-gradient(circle at 30% 30%, var(--accent), var(--accent-2)); border-radius:8px; box-shadow: 0 0 24px rgba(34,211,238,0.3); }
    .card { background: rgba(11,18,32,0.8); border:1px solid #223; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.35); }
    .card.pad { padding: 18px; }
    .row { display:flex; gap: 16px; }
    .grow { flex: 1; }
    .btn { appearance: none; border:1px solid #1f2937; color: var(--text); background: linear-gradient(180deg, #0b1220, #0a0f1a); border-radius: 12px; padding: 10px 14px; cursor: pointer; font-weight:600; box-shadow: inset 0 1px 0 rgba(255,255,255,0.05); transition: 150ms ease; }
    .btn:hover { border-color:#334155; transform: translateY(-1px); }
    .btn:disabled { opacity: 0.6; cursor: not-allowed; }
    .btn.primary { background: linear-gradient(180deg, #0ea5e9, #0ea5e933); border-color: #0ea5e9; color: white; }
    .btn.danger { border-color: #7f1d1d; background: linear-gradient(180deg, #7f1d1d, #450a0a); }
    .input, .select, .textarea { width:100%; background: #0a0f1a; color: var(--text); border:1px solid #1f2937; border-radius: 12px; padding: 10px 12px; outline: none; }
    .input:focus, .select:focus, .textarea:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(34,211,238,0.15); }
    .muted { color: var(--muted); }
    .badge { display:inline-flex; align-items:center; gap:6px; font-size: 12px; padding: 4px 8px; border-radius: 999px; background: #0a0f1a; border:1px solid #1f2937; color: var(--muted); }
    footer { padding: 32px 0; color: #94a3b8; text-align:center; }
    .shadow-inset { box-shadow: inset 0 1px 1px rgba(255,255,255,0.03), inset 0 -1px 0 rgba(0,0,0,0.4); }
    .divider { height:1px; background: #1f2937; margin: 16px 0; }
    .pill { background: rgba(96,165,250,0.15); color: #bfdbfe; border:1px solid rgba(96,165,250,0.35); padding: 2px 8px; border-radius: 999px; font-size: 12px; }
    .toast { position: fixed; right: 16px; bottom: 16px; background:#0a0f1a; border:1px solid #334155; color:var(--text); border-radius: 12px; padding: 10px 14px; box-shadow: 0 10px 24px rgba(0,0,0,0.45); min-width: 200px; display:none; }
  </style>
  <!-- Markdown & Code Highlight -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css">
  <script src="https://cdn.jsdelivr.net/npm/marked@12.0.2/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/common.min.js"></script>
  <script>
    // Konfigurasi marked + highlight
    if (window.marked) {
      marked.setOptions({
        breaks: true,
        highlight: function(code, lang){
          try { return hljs.highlight(code, {language: lang}).value; } catch(e) {
            try { return hljs.highlightAuto(code).value; } catch(e2) { return code; }
          }
        }
      });
    }
    function renderMarkdownToHtml(md){
      if (!window.marked) return md;
      return marked.parse(md || '');
    }
  </script>
</head>
<body>
  <header>
    <div class="inner container">
      <div class="brand"><div class="brand-logo"></div> OpenManus</div>
      <div class="grow"></div>
      <a href="/chat/" class="badge">Buat Chat</a>
    </div>
  </header>

  <main class="container" id="app">
    {% block content %}{% endblock %}
  </main>

  <div class="toast" id="toast"></div>
  <script>
    function showToast(message, timeout=3000) {
      const t = document.getElementById('toast');
      t.textContent = message;
      t.style.display = 'block';
      setTimeout(()=>{ t.style.display='none'; }, timeout);
    }
    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
    }
  </script>
  {% block scripts %}{% endblock %}
  <footer>
    <div class="container muted">OpenManus • ReAct + Tools • Celery + Channels</div>
  </footer>
</body>
</html>